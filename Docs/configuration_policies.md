## Policy Configuration

The policy settings control various library behaviors.

---

#### `SnapshotFrequency`

This setting controls how often the library will produce an updated snapshot record. It maps to the values defined by an enumeration named `SnapshotFrequencyEnum`:

**`Never`**
> A snapshot is never generated by the library. Some external process may choose to do this (based on domain event projection handlers, for example), although it should never write to the library's snapshot table.

**`AfterAllEvents`**
> A snapshot is generated after all posted domain events have been stored and applied. This is the default setting and is the most efficient way to ensure the snapshot is always up to date (barring unusual circumstances such as multiple processes writing events to the log).

**`AfterEachEvent`**
> A snapshot is generated after every posted domain event is stored and applied. This is not ideal for performance but ensures the snapshot is always up-to-date (barring unusual circumstances such as multiple processes writing events to the log).

**`AfterIntervalDeltas`**
> This setting uses the `SnapshotInterval` value. When the number of domain events defined by `SnapshotInterval` have been stored and applied, a new snapshot will be generated. If a batch of events is being applied, all events in the batch will be processed even if that exceeds the `SnapshotInterval` value. This is useful when the snapshot is not highly critical, but you don't want the snapshot to lag too far behind the delta log.

**`AfterIntervalSeconds`**
> This setting uses the `SnapshotInterval` value, interpreted as a number of seconds. When domain events are posted, stored, and applied, the library checks the time the snapshot was last updated against the defined interval, and if more time has passed, the snapshot will be updated. This is useful when the snapshot is not highly critical, updates are infrequent, and you don't want the snapshot to fall too far out of sync.

---

#### `SnapshotInterval`

This integer setting is only used when `SnapshotFrequency` is set to either `AfterIntervalDeltas` or `AfterIntervalSeconds`. See the preceding entry for details.

---

[Return to the Configuration topic](configuration.md)
